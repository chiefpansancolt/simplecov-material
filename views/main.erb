<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Code Coverage for <%= SimpleCov.project_name %></title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="<%= assets_path('application.css') %>" media="screen, projection, print" rel="stylesheet" type="text/css"/>
  </head>

  <body class="mdc-typography">
    <aside class="mdc-drawer mdc-drawer--dismissible mdc-drawer--open">
      <div class="mdc-drawer__header">
        <h3 class="mdc-drawer__title">Code Coverage</h3>
        <h6 class="mdc-drawer__subtitle">
          Generated using <%= result.command_name %>
        </h6>
      </div>
      <div class="mdc-drawer__content">
        <nav class="mdc-list">
          <a class="mdc-list-item mdc-list-item--activated" href="#" name="AllFiles" onclick="navigate(this.name)">
            <i class="material-icons mdc-list-item__graphic" aria-hidden="true">view_list</i>
            <span class="mdc-list-item__text">
              All Files
              <span class="">
                (<span class="<%= coverage_class(result.source_files.covered_percent) %>">
                  <%= result.source_files.covered_percent.round(2) %>%
                </span>)
              </span>
            </span>
          </a>
          <% result.groups.each do |name, files| %>
            <a class="mdc-list-item" href="#" name="<%= remove_spaces(name) %>" onclick="navigate(this.name)">
              <i class="material-icons mdc-list-item__graphic" aria-hidden="true">collections_bookmark</i>
              <span class="mdc-list-item__text">
                <%= name %>
                <span class="parenthese">
                  <span class="<%= coverage_class(files.covered_percent) %>">
                    <%= files.covered_percent.round(2)%>%
                  </span>
                </span>
              </span>
            </a>
          <% end %>
        </nav>
      </div>
    </aside>
    <div class="mdc-drawer-app-content">
      <header class="mdc-top-app-bar mdc-top-app-bar--fixed app-bar" id="app-bar">
        <div class="mdc-top-app-bar__row">
          <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
            <a href="#" class="demo-menu material-icons mdc-top-app-bar__navigation-icon">menu</a>
            <span class="mdc-top-app-bar__title">
              <%= SimpleCov.project_name.split('-').map(&:capitalize).join(' ') %>
            </span>
          </section>
          <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end">
            Generated&nbsp;
            <abbr class="timeago" datetime="<%= result.created_at %>">
              <%= result.created_at %>
            </abbr>
          </section>
        </div>
      </header>
      <main class="main-content" id="main-content">
        <div class="mdc-top-app-bar--fixed-adjust"></div>
        <%= generate_group_page("All Files", result.source_files) %>

        <% result.groups.each do |name, files| %>
            <%= generate_group_page(name, files) %>
        <% end %>
        <div class="bottom-spacer"></div>
        <section class="footer">
          <div>
            Generated by
            <a href="https://github.com/colszowka/simplecov" target="_blank">Simplecov</a>
            v<%= SimpleCov::VERSION %>
            and
            <a href="https://github.com/chiefpansancolt/simplecov-material" target="_blank">Simplecov Material</a>
            v<%= SimpleCov::Formatter::MaterialFormatter::VERSION %>
            using <%= result.command_name %>
          </div>
        </section>
      </main>
    </div>

    <% result.source_files.each do |source_file| %>
        <%= generate_dialog(source_file) %>
    <% end %>
    <script src="<%= assets_path('application.js') %>" type="text/javascript"></script>
  </body>
</html>
